@import utils.DateUtils
@import views.html.fragments.heading

@(instances: Seq[Instance], emptyChar: String = "-")

@main("AMI") {
    @heading("Instances running using old AMIs (older than 30 days)")
    <div class="container">
    @if(instances.nonEmpty) {
        <div class="ami-usage--message">Instances</div>
        <table class="striped responsive-table ami-usage--table">
            <thead>
                <tr>
                    <th class="instance-details-table__heading">Stack</th>
                    <th class="instance-details-table__heading">Stage</th>
                    <th class="instance-details-table__heading">App</th>
                    <th class="instance-details-table__heading">State</th>
                    <th class="instance-details-table__heading">Instance name</th>
                    <th class="instance-details-table__heading">IP</th>
                    <th class="instance-details-table__heading">Creation date</th>
                </tr>
            </thead>
            <tbody>
            @for(instance <- instances) {
                <tr>
                    <td class="instance-details-table__entry">@instance.stack.getOrElse(emptyChar)</td>
                    <td class="instance-details-table__entry">@instance.stage.getOrElse(emptyChar)</td>
                    <td class="instance-details-table__entry">@instance.app</td>
                    <td class="instance-details-table__entry">@instance.vendorState</td>
                    <td class="instance-details-table__entry">@instance.instanceName</td>
                    <td class="instance-details-table__entry">@instance.ip</td>
                    <td class="instance-details-table__entry">@DateUtils.readableDateTime.print(instance.createdAt)</td>
                </tr>
            }
            </tbody>
        </table>
    }
    </div>
}()
